<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>결과 | 집중력 향상 게임</title>
  <style>
    /* 폰트 */
    @font-face {
      font-family: 'Galmuri11';
      src: url('./assets/fonts/Galmuri11.woff2') format('woff2');
      font-weight: 400; font-style: normal; font-display: swap;
    }
    @font-face {
      font-family: 'Galmuri11';
      src: url('./assets/fonts/Galmuri11-Bold.woff2') format('woff2');
      font-weight: 700; font-style: normal; font-display: swap;
    }

    :root{
      --white:#fff;
      --maxw:680px;
      --shadow: 0 10px 24px rgba(0,0,0,.18);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}

    /* 배경 */
    html{ background:#FF7B75 }
    body{
      background:#FF7B75;
      color:var(--white);
      font-family:'Galmuri11', -apple-system, BlinkMacSystemFont,
                   "Noto Sans KR","Malgun Gothic",sans-serif;
      min-height:100vh;
      display:flex; align-items:flex-start; justify-content:center;
      position:relative; isolation:isolate; overflow-x:hidden;
    }
    body::before{
      content:""; position:fixed; inset:0; z-index:-1;
      background:linear-gradient(180deg,#B962FF 0%,#FF7B75 100%);
    }

    main{
      width:min(var(--maxw), 92vw);
      margin:10vh auto 6vh;
      text-align:center;
    }

    /* 1) 타이틀 */
    .title{
      font-weight:700; font-size:20px; line-height:1.4;
      text-shadow: 0 1px 0 rgba(0,0,0,.12);
      margin-bottom:18px;
    }

    /* 2) 비공개 이미지: 원본 비율 그대로 (짤림 방지) */
    .locked{
      width:min(560px, 92vw);
      margin: 0 auto 26px;
      border-radius:12px;
      box-shadow: var(--shadow);
      background:#1e1e1f;
      overflow:hidden;
      padding:0;           /* 내부 패딩 없음 */
      line-height:0;
    }
    .locked img{
      display:block;
      width:100%;
      height:auto;         /* ← 원본 비율 유지 */
      object-fit: contain; /* ← 짤림 방지 */
    }

    /* 3) 카피 */
    .copy{
      font-weight:400; font-size:16px; line-height:1.6;
      opacity:.95; margin: 6px 0 14px;
    }

    /* 4) CTA(이미지 버튼) */
    .cta{
      display:inline-block; line-height:0;
      border-radius:12px; box-shadow: var(--shadow);
      transition: transform .06s ease, opacity .12s ease;
    }
    .cta:active{ transform: translateY(1px) }
    .cta img{ display:block; width: 200px; height:auto }
  </style>
</head>
<body>
  <main>
    <!-- 1) 타이틀 -->
    <h1 class="title">나는 상위 몇% 일까?</h1>

    <!-- 2) 비공개 이미지 (통짜) -->
    <div class="locked" aria-label="결과는 앱에서 확인 가능">
      <img src="./assets/locked-banner.png" alt="잠금된 결과 이미지" />
    </div>

    <!-- 3) 카피 -->
    <p class="copy">Qoo10 앱에서 확인할 수 있어요</p>

    <!-- 4) 큐텐으로 이동 (이미지 버튼) -->
    <a href="#" id="cta" class="cta" aria-label="Qoo10으로 이동">
      <img src="./assets/qoo10-btn.png" alt="Qoo10으로 이동" />
    </a>
  </main>

  <script>
    // ===== 이동 경로 설정 =====
    const PLAY_URL   = 'https://play.google.com/store/apps/details?id=net.giosis.shopping.jp';
    const APPSTORE_URL = 'https://apps.apple.com/kr/app/qoo10-%E3%82%AD%E3%83%A5%E3%83%BC%E3%83%86%E3%83%B3/id490078053';
    const WEB_URL    = 'https://www.qoo10.jp/';
    // (추정 스킴) 스킴이 다르면 여기만 교체하세요.
    const IOS_SCHEME = 'qoo10://';
    const ANDROID_INTENT = `intent://open#Intent;scheme=qoo10;package=net.giosis.shopping.jp;S.browser_fallback_url=${encodeURIComponent(PLAY_URL)};end`;

    const cta = document.getElementById('cta');

    function isAndroid(){ return /Android/i.test(navigator.userAgent); }
    function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent); }
    function isMobile(){ return isAndroid() || isIOS(); }

    function openOnIOS(){
      const start = Date.now();
      // 스킴 시도
      window.location.href = IOS_SCHEME;

      // 1.2초 내 페이지가 백그라운드로 가지 않으면 → 앱 미설치로 판단하고 App Store
      let hidden = false;
      const onHide = () => hidden = true;
      document.addEventListener('visibilitychange', onHide, { once:true });

      setTimeout(() => {
        document.removeEventListener('visibilitychange', onHide, { once:true });
        if (!hidden && Date.now() - start < 1600) {
          window.location.href = APPSTORE_URL;
        }
      }, 1200);
    }

    function openOnAndroid(){
      // 인텐트: 설치 시 앱 열림, 미설치 시 fallback_url로 스토어 이동
      window.location.href = ANDROID_INTENT;
    }

    cta.addEventListener('click', (e) => {
      e.preventDefault();
      if (!isMobile()) {
        // 데스크톱 → 웹으로
        window.location.href = WEB_URL;
        return;
      }
      if (isIOS()) openOnIOS();
      else openOnAndroid();
    });
  </script>
</body>
</html>
